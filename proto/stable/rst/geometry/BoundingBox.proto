syntax = "proto2";

package rst.geometry;

import "rst/Unit.proto";
import "rst/Constraint.proto";

import "rst/math/Vec2DInt.proto";

option java_outer_classname = "BoundingBoxType";

/**
 * A bounding box, which is associated to a raster image.
 *
 * .. parsed-literal::
 *
 *    (0,0)           Image
 *    +----------------------------------+ ^
 *    |                                  |
 *    |    @ref .top_left                    |
 *    |    +---------------+ ^           |
 *    |    |               |             |
 *    |    |               | @ref .height    | @ref .image_height
 *    |    |               |             |
 *    |    +---------------+ v           |
 *    |    <    @ref .width     >            |
 *    |                                  |
 *    +----------------------------------+ v
 *    <         @ref .image_width            >
 *
 * All values are in pixels and refer to the associated image.
 *
 * @author Johannes Wienke <jwienke@techfak.uni-bielefeld.de>
 */
// @create_collection
message BoundingBox {

    /**
     * Coordinates of the top left corner.
     */
    required math.Vec2DInt top_left = 1 [ (rst.unit) = "pixel" ];

    /**
     * Width of the bounding box.
     */
    required uint32 width = 2 [ (rst.unit) = "pixel" ];

    /**
     * Height of the bounding box.
     */
    required uint32 height = 3 [ (rst.unit) = "pixel" ];

    /**
     * Width of the image the bounding box is based on.
     */
    optional uint32 image_width = 4 [ (rst.unit) = "pixel" ];

    /**
     * Height of the image the bounding box is based on.
     */
    optional uint32 image_height = 5 [ (rst.unit) = "pixel" ];

    option (rst.message_constraint) = ".top_left.x < .image_width";
    option (rst.message_constraint) = ".top_left.x + .width <= .image_width";
    option (rst.message_constraint) = ".top_left.y < .image_height)";
    option (rst.message_constraint) = ".top_left.y + .height <= .image_height)";

}
